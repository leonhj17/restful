{% load  staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body style="">

    <div id="container" style="width: 1000px;height: 800px;display: block;margin: 0 auto;"></div>

    <button id="get_value">获取数据</button>
    <script src="{% static 'js/jquery-3.3.1.js' %}"></script>
{#    <script src="{% static 'js/highcharts.js' %}"></script>#}
    <script src="{% static 'js/highstock.js' %}"></script>
    <script src="{% static 'js/exporting.js' %}"></script>
    <script src="{% static 'js/export-data.js' %}"></script>
    <script>
        Highcharts.setOptions({global: {useUTC: false}});
    </script>
    <script>
        var options = {
            rangeSelector: {
                selected: 1
            },
            credits:{
                enabled: false
            },
            chart: {
                type: 'line'
            },
            title: {
                text: '烟温传感器历史数据'
            },
            xAxis: {
                type: 'datetime'
{#                categories: ['苹果', '香蕉', '梨']#}
            },
            yAxis: {
                title: {
                  text: '烟温 ℃'
                }
            },
            series: [
                {name: 'kks1',
                data: [],
                    tooltip: {
                        valueDecimals: 2
                        }
                },
            ]
        };
        var chart = Highcharts.stockChart('container', options);
    </script>
    <script>
        function get_value() {
            d = [];
            $.ajax({
                url: '{% url 'tempsensor:tempvaluedetail' 1%}',
                type: 'GET',
                success: function (data) {
                    for (var i=0; i<data.length; i++) {
                        time =new Date(data[i].time);
                        tstamp = time.getTime();
                        d.push([tstamp, data[i].value])
                    }
                    chart.series[0].setData(d);
                }
            }
            );
            console.log(d);

        }

        $('#get_value').click(function () {
            get_value();
        })
    </script>
</body>
</html>